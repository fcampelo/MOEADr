<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Testing New Operators using the MOEADr Package • MOEADr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Testing New Operators using the MOEADr Package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MOEADr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Basic_Usage.html">Basic Usage of the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/Comparison_Usage.html">Fine tuning MOEA/D configurations using MOEADr and irace</a>
    </li>
    <li>
      <a href="../articles/Modification_Usage.html">Testing New Operators using the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/problem-definition.html">Defining Problems in the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/writing-functions-for-moeadr.html">Writing Extensions for the MOEADr Package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Testing New Operators using the MOEADr Package</h1>
                        <h4 class="author">Claus Aranha</h4>
            
            <h4 class="date">2020-02-17</h4>
      
      
      <div class="hidden name"><code>Modification_Usage.Rmd</code></div>

    </div>

    
    
<p>Let us show how to prepare a new component for the MOEADr framework, add it to an existing algorithmic composition, and perform some basic comparisons. For this example, we will create a simple variation operator that does not exist in the package in its current state, but the same principle works for adding components of other classes.</p>
<div id="creating-a-new-operator" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-new-operator" class="anchor"></a>Creating a new operator</h2>
<p>Consider the following “<em>Gaussian Mutation</em>” operator: given a set <span class="math inline">\(X\)</span> of solutions <span class="math inline">\(\mathbf{x_i} \in X\)</span> we add, with probability <span class="math inline">\(p\)</span>, a gaussian noise <span class="math inline">\(r_{ij} \sim \mathcal{N}(\mu, \sigma)\)</span> to each <span class="math inline">\(x_{ij} \in \mathbf{x_i} \in X\)</span>. The <em>R</em> code for this operator is as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">variation_gaussmut &lt;-<span class="st"> </span><span class="cf">function</span>(X, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="fl">0.1</span>, <span class="dt">p =</span> <span class="fl">0.1</span>, ...) {</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  <span class="co"># You want to do some error checking on the parameters here</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="co"># But for the sake of brevity in this case study, we are skipping it.</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  R &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(X),    <span class="co"># vector of normally distributed values, </span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">             <span class="dt">mean =</span> mean,  <span class="co"># length(R) = nrow(X) * ncol(X)</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">             <span class="dt">sd   =</span> sd)</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">  R &lt;-<span class="st"> </span>R <span class="op">*</span><span class="st"> </span>(<span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(X)) <span class="op">&lt;=</span><span class="st"> </span>p) <span class="co"># Apply binary mask, probability = p</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span> (X <span class="op">+</span><span class="st"> </span>R)                   <span class="co"># Add mutations to the solution matrix</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">}</a></code></pre></div>
<p>We would like to highlight a few characteristics of the code sample above. First, the name of the function must be in the form <em>variation_[functionname]</em>. The MOEADr package uses the function name prefixes to perform some automated functions such as listing existing components and error checking. The list of current function prefixes and their meaning is:</p>
<ul>
<li>
<em>constraint_</em>: Constraint handling components</li>
<li>
<em>decomposition_</em>: Decomposition functions</li>
<li>
<em>ls_</em>: Local search operators</li>
<li>
<em>scalarization_</em>: Scalarization functions</li>
<li>
<em>stop_</em>: Stop criteria components</li>
<li>
<em>uptd_</em>: Update components</li>
<li>
<em>variation_</em>: Variation operators</li>
</ul>
<p>Second, the parameters in the function definition must include: the solution set matrix <span class="math inline">\(X\)</span>, the local parameters for the function, and finally an ellipsis argument to catch any other inputs passed by the main <em>moead()</em> call, such as objective values and former solution sets. If you want examples of using these parameters please look at the source code for some of the variation operators included, such as the Binomial Recombination operator (<em>variation_binrec</em>)</p>
<p>Other component classes follow similar rules. Please look at existing implementations as basis for new ideas.</p>
</div>
<div id="testing-the-new-operator" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-the-new-operator" class="anchor"></a>Testing the new operator</h2>
<p>The <strong>MOEADr</strong> package first searches for operators in the base R environment. Therefore, if you have named your component correctly, all you need to do is add it to the appropriate parameter in the <em>moead()</em> call.</p>
<p>For example, let us replace the variation stack of the original MOEA/D by our Gaussian Mutation operator, followed by simple truncation, and test it on a standard benchmark function (performing a qualitative graphical comparison against the original MOEA/D just for fun):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MOEADr))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(smoof))</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">ZDT1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_vectorized_smoof.html">make_vectorized_smoof</a></span>(<span class="dt">prob.name  =</span> <span class="st">"ZDT1"</span>,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">                              <span class="dt">dimensions =</span> <span class="dv">30</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">problem.zdt1  &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">name       =</span> <span class="st">"ZDT1"</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">                      <span class="dt">xmin       =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">0</span>, <span class="dv">30</span>),</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">                      <span class="dt">xmax       =</span> <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="dv">1</span>, <span class="dv">30</span>),</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">                      <span class="dt">m          =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb2-10" data-line-number="10"></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">myvar &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>()                                   <span class="co"># Initialize variation stack</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">myvar[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">name =</span> <span class="st">"gaussmut"</span>, <span class="dt">p =</span> <span class="fl">0.5</span>)    <span class="co"># Our new operator</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">myvar[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">name =</span> <span class="st">"truncate"</span>)             <span class="co"># Truncation repair operator</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"></a>
<a class="sourceLine" id="cb2-16" data-line-number="16">results.orig  &lt;-<span class="st"> </span><span class="kw"><a href="../reference/moead.html">moead</a></span>(<span class="dt">problem  =</span> problem.zdt1,</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">                       <span class="dt">preset   =</span> <span class="kw"><a href="../reference/preset_moead.html">preset_moead</a></span>(<span class="st">"original"</span>),</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">                       <span class="dt">showpars =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">show.iters =</span> <span class="st">"none"</span>), </a>
<a class="sourceLine" id="cb2-19" data-line-number="19">                       <span class="dt">seed     =</span> <span class="dv">42</span>)</a>
<a class="sourceLine" id="cb2-20" data-line-number="20">results.myvar &lt;-<span class="st"> </span><span class="kw"><a href="../reference/moead.html">moead</a></span>(<span class="dt">problem  =</span> problem.zdt1,</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">                       <span class="dt">preset   =</span> <span class="kw"><a href="../reference/preset_moead.html">preset_moead</a></span>(<span class="st">"original"</span>),</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">                       <span class="dt">variation =</span> myvar,</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">                       <span class="dt">showpars =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">show.iters =</span> <span class="st">"none"</span>), </a>
<a class="sourceLine" id="cb2-24" data-line-number="24">                       <span class="dt">seed     =</span> <span class="dv">42</span>)</a></code></pre></div>
<p>Since the function that implements the Gaussian Mutation operator was defined in the main environment, and has the required <em>variation_</em> prefix, all that we need to do to use it in the <em>moead()</em> function is to add the necessary parameters to the variation stack. The figures below show the final Pareto front for both the standard MOEA/D and the MOEA/D with a Gaussian Mutation operator. From these images, it seems (rather unsurprisingly) that the new operator still needs some work.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(results.orig, <span class="dt">suppress.pause =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="Modification_Usage_files/figure-html/unnamed-chunk-3-1.png" width="528" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(results.myvar, <span class="dt">suppress.pause =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="Modification_Usage_files/figure-html/unnamed-chunk-3-2.png" width="528" style="display: block; margin: auto;"></p>
<p>We welcome new contributions to <strong>MOEADr</strong>’s component library: users are invited and encouraged to contact us to add their published contributions to the package (or simply clone the GitHub repository and submit his or her contribution as a pull request).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-new-operator">Creating a new operator</a></li>
      <li><a href="#testing-the-new-operator">Testing the new operator</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Felipe Campelo, Claus Aranha.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
