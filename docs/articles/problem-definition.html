<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Defining Problems in the MOEADr Package • MOEADr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Defining Problems in the MOEADr Package">
<meta property="og:description" content="MOEADr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MOEADr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Basic_Usage.html">Basic Usage of the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/Comparison_Usage.html">Fine tuning MOEA/D configurations using MOEADr and irace</a>
    </li>
    <li>
      <a href="../articles/Modification_Usage.html">Testing New Operators using the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/problem-definition.html">Defining Problems in the MOEADr Package</a>
    </li>
    <li>
      <a href="../articles/writing-functions-for-moeadr.html">Writing Extensions for the MOEADr Package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fcampelo/MOEADr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Defining Problems in the MOEADr Package</h1>
                        <h4 data-toc-skip class="author">Felipe
Campelo</h4>
            
            <h4 data-toc-skip class="date">2023-01-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/fcampelo/MOEADr/blob/HEAD/vignettes/problem-definition.Rmd" class="external-link"><code>vignettes/problem-definition.Rmd</code></a></small>
      <div class="hidden name"><code>problem-definition.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This is a short guide to defining the problem structure for running
MOEA/Ds using the MOEADr package. In this document, we cover:</p>
<ul>
<li>Structure of the input variable <code>problem</code>
</li>
<li>Structure of objective function routines, given as
<code>problem$name</code>
</li>
<li>structure of constraint function routines, given as
<code>problem$constraint$name</code>
</li>
</ul>
<p>A general description of the algorithm and the component-based
interpretation behind the MOEADr package is available in our paper<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</div>
<div class="section level2">
<h2 id="problem-structure">Problem structure<a class="anchor" aria-label="anchor" href="#problem-structure"></a>
</h2>
<p>In the MOEADr package, all information regarding the problem is input
as a list variable <code>problem</code>. This parameter must contain
enough information for the algorithm to correctly evaluate all the
objective and constraint functions, as documented in function
<code><a href="../reference/moead.html">moead()</a></code> and replicated below for convenience.</p>
<p>The <code>problem</code> list must contain the following required
fields:</p>
<ul>
<li>
<code>problem$name</code>, with the name of the problem instance
function, that is, a routine that calculates <strong>Y</strong> =
<strong>f</strong>(<strong>X</strong>). The details of this routine are
documented in Section <em>Objective Functions Routine</em>, see
below.<br>
</li>
<li>
<code>problem$xmin</code>, containing a vector of lower bounds of
each variable of the problem.<br>
</li>
<li>
<code>problem$xmax</code>, containing a vector of upper bounds of
each variable of the problem.<br>
</li>
<li>
<code>problem$m</code>, containing a positive integer
<code>m&gt;1</code> with the number of objectives</li>
</ul>
<p>Fields <code>$xmin</code> and <code>$xmax</code> provide information
for the internal variable standardization performed by the MOEADr
package, as well as information about the number of problem variables.
This information is also used for the definition of the initial
population, but it <strong>does not</strong> guarantee that the points
will remain within this interval as the iterations progress - for that,
variation operators such as <code>truncate</code> or explicit
constraints (see below, Section <em>Constraint Functions Routine</em>)
must be employed.</p>
<p>Besides these fields, <code>problem</code> should contain any other
relevant inputs for the routine listed in <code>problem$name</code>.</p>
<p><code>problem</code> may also contain the optional field
<code>problem$constraints</code>, which is itself a list object
containing information about the problem constraints. If present,
<code>problem$constraints</code> must contain the following fields:</p>
<ul>
<li>
<code>problem$constraints$name</code> - (required) name of the
function that calculates the constraint values. The details of this
routine are documented in Section <em>Constraint Functions Routine</em>,
see below.<br>
</li>
<li>
<code>problem$constraints$epsilon</code> - (optional) a small
non-negative value indicating the tolerance to be considered for
equality constraints. Defaults to zero.</li>
</ul>
<p>Besides these fields, <code>problem$constraints</code> should contain
any other relevant inputs for the routine listed in
<code>problem$constraints$name</code>.</p>
<p>To guide us through the steps required to define a problem structure
for the MOEADr package, assume that we want to use the MOEADr framework
to solve a 10-variable, 2-objective DTLZ1 benchmark function<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. Assume
that the feasible space is defined by the interval [0, 1] for all
variables, and by <span class="math inline">\(x_1^2 + 2x_2^2 \leq
1.2\)</span> and <span class="math inline">\(x_3x_4 = 0.5\)</span>. In
this case, the <code>problem</code> variable would be defined as:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">problem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name        <span class="op">=</span> <span class="st">"moeadr_dtlz1"</span>,  <span class="co"># objective function routine</span></span>
<span>                xmin        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>,      <span class="co"># lower limits</span></span>
<span>                xmax        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>,      <span class="co"># upper limits</span></span>
<span>                m           <span class="op">=</span> <span class="fl">2</span>,               <span class="co"># number of objectives</span></span>
<span>                constraints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                  name      <span class="op">=</span> <span class="st">"my_constraints"</span>,<span class="co"># constraint function routine</span></span>
<span>                  epsilon   <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span><span class="op">)</span>           <span class="co"># tolerance for equality constraints</span></span></code></pre></div>
<p>The specific requirements regarding functions
<code>problem$name</code> and <code>problem$constraints$name</code> are
provided in the following sections.</p>
</div>
<div class="section level2">
<h2 id="objective-functions-routine">Objective Functions Routine<a class="anchor" aria-label="anchor" href="#objective-functions-routine"></a>
</h2>
<p>The routine indicated in <code>problem$name</code> must be able to
receive a [ N x n<sub>v</sub> ] matrix, where each row represents one
candidate solution. The name of the input argument that receives the
population matrix must be either or .</p>
<p>This routine must return a [ N x n<sub>f</sub> ] matrix, where each
row contains the n<sub>f</sub> objective function values for one
solution.</p>
<p>To illustrate these requirements, we provide below the example
function <code>moeadr_dtlz1</code>.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> This function is simply a MOEADr-compliant
wrapper for the DTLZ1 implementation available in the <code>smoof</code>
package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">moeadr_dtlz1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">X</span>,     <span class="co"># population matrix</span></span>
<span>                         <span class="va">...</span>    <span class="co"># allow function to receive extra parameters. </span></span>
<span>                                <span class="co"># These are unused in most cases, but it is useful </span></span>
<span>                                <span class="co"># for preventng errors due to unwanted parameters </span></span>
<span>                                <span class="co"># being passed</span></span>
<span><span class="op">)</span><span class="op">{</span></span>
<span></span>
<span>  <span class="co"># "smoof" is listed in the Suggests field MOEADr's DESCRIPTION, but we need to </span></span>
<span>  <span class="co"># be sure that it is available, so:</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="st">"smoof"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Please install package 'smoof' to continue"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># make 10-variable, 2-objective DTLZ1</span></span>
<span>  <span class="va">smoof_dtlz1</span> <span class="op">&lt;-</span> <span class="fu">smoof</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/smoof/man/makeDTLZ1Function.html" class="external-link">makeDTLZ1Function</a></span><span class="op">(</span>dimensions   <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                                          n.objectives <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Evaluate points in a vectorized manner:</span></span>
<span>  <span class="va">Y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">X</span>,</span>
<span>               MARGIN <span class="op">=</span> <span class="fl">1</span>,</span>
<span>               FUN <span class="op">=</span> <span class="va">smoof_dtlz1</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Return [N x n_f] matrix</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">Y</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Notice that the objective functions routine does not use the
information from <code>xmin</code>, <code>xmax</code>, <code>m</code>,
or <code>constraints</code> - these fields are used elsewhere in the
MOEADr structure to define the initial population, weight matrices,
truncation operators etc.</p>
</div>
<div class="section level2">
<h2 id="constraint-functions-routine">Constraint Functions Routine<a class="anchor" aria-label="anchor" href="#constraint-functions-routine"></a>
</h2>
<p>As in the objective functions case, the routine indicated in
<code>problem$constraints$name</code> must be able to receive a [ N x
n<sub>v</sub> ] matrix, where each row represents one candidate
solution. The name of the input argument that receives the population
matrix must be either or .</p>
<p>This function must return a list object containing the following
fields:</p>
<ul>
<li>
<code>$Cmatrix</code>, a [ N x (n<sub>g</sub> + n<sub>h</sub>) ]
matrix, where each row contains the individual constraint function
values for one solution. The names of each column should ideally be
informative regardind to which constraint the function refers (this is
not mandatory, but it is a good practice that can save the user a great
deal of time).<br>
</li>
<li>
<code>$Vmatrix</code>, a [ N x (n<sub>g</sub> + n<sub>h</sub>) ]
matrix, where each row contains the individual constraint
<strong>violations</strong> for one solution.</li>
<li>
<code>$v</code>, a vector [N x 1], where each component contains the
total violation of one solution, that is, the value of:</li>
</ul>
<p><span class="math display">\[v[k] = v(x_k) = \sum_i
max(~g_i(x_k),~~0) + \sum_j max(~|h_j(x_k)| - \epsilon,~~0)\]</span>
<code>v</code> is calculated simply as <code>rowsums(Vmatrix)</code>,
but returning it prevents having to re-compute <code>v</code> in
different places of the MOEA/D structure.</p>
<p>To illustrate these requirements, we provide below the example
function <code>my_constraints</code>.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> Recall that we have a number of different
constraints that were stated in the problem definition:</p>
<ul>
<li>10 inequality constraints regarding the requirement that <span class="math inline">\(x_i \geq 0\)</span>
</li>
<li>10 inequality constraints regarding the requirement that <span class="math inline">\(x_i \leq 1\)</span>
</li>
<li>1 inequality constraint <span class="math inline">\(g_1(\mathbf{x})
= x_1^2 + 2x_2^2 - 1.2 \leq 0\)</span>
</li>
<li>1 equality constraint <span class="math inline">\(h_1(\mathbf{x}) =
x_3x_4 - 0.5 = 0\)</span>
</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_constraints</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">X</span>,           <span class="co"># population matrix</span></span>
<span>                           <span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0</span>, <span class="co"># tolerance for equality constraints</span></span>
<span>                                        <span class="co"># (defaults to zero if not provided)</span></span>
<span>                           <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">nv</span> <span class="op">&lt;-</span> <span class="fl">10</span> <span class="co"># number of variables of the problem</span></span>
<span>  </span>
<span>  <span class="co"># Prepare output matrix of constraint function values</span></span>
<span>  <span class="va">Cmatrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                    nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span>,</span>
<span>                    ncol <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">nv</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># 20 inequality box constraints, plus g1 and h1</span></span>
<span>  </span>
<span>  <span class="co"># Set informative column names (be nice to your users!)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">Cmatrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"x"</span>, </span>
<span>                                <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">nv</span>, times <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span>
<span>                                <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"min"</span>,<span class="st">"max"</span><span class="op">)</span>, each <span class="op">=</span> <span class="va">nv</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                         <span class="st">"g1"</span>,</span>
<span>                         <span class="st">"h1"</span><span class="op">)</span></span>
<span>                    </span>
<span>  <span class="co"># Box limits of the feasible space</span></span>
<span>  <span class="va">Xmin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">0</span>, nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="va">nv</span><span class="op">)</span></span>
<span>  <span class="va">Xmax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span>, nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="va">nv</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Calculate "x_i &gt;= 0" and "x_i &lt;= 1" constraints</span></span>
<span>  <span class="va">Cmatrix</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="va">nv</span><span class="op">]</span>              <span class="op">&lt;-</span> <span class="va">Xmin</span> <span class="op">-</span> <span class="va">X</span></span>
<span>  <span class="va">Cmatrix</span><span class="op">[</span>, <span class="op">(</span><span class="va">nv</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">nv</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">X</span> <span class="op">-</span> <span class="va">Xmax</span></span>
<span>  </span>
<span>  <span class="co"># g1 and h1 functions</span></span>
<span>  <span class="va">g1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">X</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">-</span> <span class="fl">1.2</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">h1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">X</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">*</span> <span class="va">X</span><span class="op">[</span>, <span class="fl">4</span><span class="op">]</span> <span class="op">-</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># Calculate g1(x) and h1(x)</span></span>
<span>  <span class="va">Cmatrix</span><span class="op">[</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">nv</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">g1</span><span class="op">(</span><span class="va">X</span><span class="op">)</span></span>
<span>  <span class="fu">Cmatrix</span><span class="op">(</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">nv</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">h1</span><span class="op">(</span><span class="va">X</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Assemble matrix of *violations*</span></span>
<span>  <span class="va">Vmatrix</span> <span class="op">&lt;-</span> <span class="va">Cmatrix</span></span>
<span>  <span class="va">Vmatrix</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">nv</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">Vmatrix</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">nv</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">]</span>, <span class="fl">0</span><span class="op">)</span>        <span class="co"># inequality constraints</span></span>
<span>  <span class="va">Vmatrix</span><span class="op">[</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">nv</span> <span class="op">+</span> <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">Vmatrix</span><span class="op">[</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">nv</span> <span class="op">+</span> <span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="va">epsilon</span>, <span class="fl">0</span><span class="op">)</span> <span class="co"># equality constraint h1</span></span>
<span>  </span>
<span>  <span class="co"># Return necessary variables</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Cmatrix <span class="op">=</span> <span class="va">Cmatrix</span>,</span>
<span>              Vmatrix <span class="op">=</span> <span class="va">Vmatrix</span>,</span>
<span>              v       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">Vmatrix</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>Some <strong>VERY</strong> important points:</p>
<ul>
<li>All constraints are expressed in the standard form, that is, <span class="math inline">\(g_i(\mathbf{x}) \leq 0\)</span> and <span class="math inline">\(h_j(\mathbf{x}) = 0\)</span>. You may choose to
express them differently, but in that case be extra careful with the
calculations of <code>Vmatrix</code> and <code>v</code>;</li>
<li>All box constraints must be included as part of the constraint
violations routine, otherwise they will be ignored by the constraint
handling approaches. This can in principle be a valid option, for
instance, if i) the problem is actually unconstrained; or ii) a repair
method such as the <em>truncate</em> variation operator is used.</li>
</ul>
<hr>
<p>The MOEADr package already provides a convenient implementation for a
“box constraints” (function <code><a href="../reference/box_constraints.html">box_constraints()</a></code>) and “unitary
constraints” (function <code><a href="../reference/unitary_constraints.html">unitary_constraints()</a></code>). See the
specific documentation for details.</p>
<p>To use these functions, simple make
<code>constraints = list(name = "box_constraints")</code> (or
<code>"unitary_constraints"</code>, if that is the case) in your
definition of the <code>problem</code> input. And don’t forget the
<code>epsilon</code> in the case of unitary constraints!</p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>F. Campelo, L.S. Batista and C. Aranha, “A
Component-Wise Perspective on Multiobjective Evolutionary Algorithms
based on Decomposition”, in preparation.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="https://deap.readthedocs.io/en/master/api/benchmarks.html#deap.benchmarks.dtlz1" class="external-link uri">https://deap.readthedocs.io/en/master/api/benchmarks.html#deap.benchmarks.dtlz1</a><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>This function is not available in the MOEADr package -
instead we provide the more general function
<code><a href="../reference/make_vectorized_smoof.html">make_vectorized_smoof()</a></code>. See the documentation for
details.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>Also not available in the MOEADr package, since it does
not make much practical sense.<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Felipe Campelo, Claus Aranha.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
